<pepo-header></pepo-header>
<section class="page-container">
  <div class="users-search">
    <input ng-model="searchValue" ng-change="fn()" type="text" class="users-search_input" placeholder="Search...">
  </div>

  <div class="pepo-info">
    <div class="pepo-info_text">Найдено {{totalUsers}} пеповчан</div>
  </div>

  <ul class="users-list">
    <li ng-repeat="user in users" ng-init="isSubscribe(user)" class="users-list_item user">
      <img ng-click="goToUser(user.username)" ng-src="{{user.avatarUrl}}" alt="" class="user_img">
      <div class="user_content">
        <div ng-click="goToUser(user.username)" class="user_name">{{user.name}}</div>
        <div ng-click="goToUser(user.username)" class="user_nickname">@{{user.username}}</div>
        <div ng-hide="subscribed[user._id] || (user.username == curUser.username)" class="pepo_btn user_subscribe" ng-click="subscribe(user)">+ Читать</div>
        <div ng-show="subscribed[user._id] " class="pepo_btn user_unsubscribe" ng-click="unsubscribe(user)">Читаю</div>
        <p class="user_description">{{user.description}}</p>

        <ul class="user-info" ng-class="{'mg80' : user.username == curUser.username}">
          <li class="user-info_item">
            <div class="user-info_number">{{user.statusesCount}}</div>
            <div class="user-info_label">пепов</div>
          </li>
          <li class="user-info_item">
            <div class="user-info_number">{{ user._id == curUser._id? curUser.followingCount : user.followingCount}}</div>
            <div class="user-info_label">читаемых</div>
          </li>
          <li class="user-info_item">
            <div class="user-info_number">{{user.followersCount}}</div>
            <div class="user-info_label">читателей</div>
          </li>
        </ul>
      </div>
    </li>
  </ul>

  <div class="load-more-btn" ng-click="loadMoreUsers()" ng-class="{'load-more-btn__progress': usersLoading}"></div>

</section>
